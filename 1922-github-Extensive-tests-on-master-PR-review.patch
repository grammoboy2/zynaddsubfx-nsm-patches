From 406cf4a4aaab029235a60944c1cbfeba9062e02c Mon Sep 17 00:00:00 2001
From: Johannes Lorenz <j.git@lorenz-ho.me>
Date: Fri, 16 Jun 2023 20:12:49 +0200
Subject: [PATCH 1922/1936] github: Extensive tests on master/PR review

---
 .github/workflows/ccpp.yml | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

diff --git a/.github/workflows/ccpp.yml b/.github/workflows/ccpp.yml
index 57da16de..e8d1812e 100644
--- a/.github/workflows/ccpp.yml
+++ b/.github/workflows/ccpp.yml
@@ -1,6 +1,10 @@
 name: Ubuntu Build CI
 
-on: [push, pull_request]
+on:
+  push:
+  pull_request:
+  pull_request_review:
+    types: [submitted]
 
 jobs:
   build:
@@ -21,10 +25,13 @@ jobs:
       run: git submodule update --init
     - name: configure
       run: mkdir build && cd build && cmake ..
+    - name: configure-extensive
+      if: (github.event_name == 'pull_request_review' && github.event.action == 'submitted') || ( github.ref == 'refs/heads/master' )
+      run: cd build && cmake -DCompileExtensiveTests=ON ..
     - name: make
       run: cd build && make
     - name: make test
-      run: cd build && make test
+      run: cd build && make test CTEST_OUTPUT_ON_FAILURE=1
 #  build_arch_linux_system_rtosc:
 #    runs-on: ubuntu-latest
 #    container:
-- 
2.47.0

