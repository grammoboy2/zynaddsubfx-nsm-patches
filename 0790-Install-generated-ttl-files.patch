From dcd0c85d03f068abef6518a300fa49fd9ea4e9c8 Mon Sep 17 00:00:00 2001
From: falkTX <falktx@gmail.com>
Date: Sun, 13 Dec 2015 19:18:22 +0100
Subject: [PATCH 0790/1936] Install generated ttl files

---
 src/Plugin/AlienWah/CMakeLists.txt      | 3 +++
 src/Plugin/Chorus/CMakeLists.txt        | 3 +++
 src/Plugin/Distortion/CMakeLists.txt    | 3 +++
 src/Plugin/DynamicFilter/CMakeLists.txt | 3 +++
 src/Plugin/Echo/CMakeLists.txt          | 3 +++
 src/Plugin/Phaser/CMakeLists.txt        | 3 +++
 src/Plugin/Reverb/CMakeLists.txt        | 3 +++
 src/Plugin/Reverb/Reverb.cpp            | 5 ++++-
 8 files changed, 25 insertions(+), 1 deletion(-)

diff --git a/src/Plugin/AlienWah/CMakeLists.txt b/src/Plugin/AlienWah/CMakeLists.txt
index b3df0cdb..e0f8e7fa 100644
--- a/src/Plugin/AlienWah/CMakeLists.txt
+++ b/src/Plugin/AlienWah/CMakeLists.txt
@@ -23,3 +23,6 @@ install(TARGETS ZynAlienWah_vst LIBRARY DESTINATION lib/vst/)
 add_custom_command(TARGET ZynAlienWah_lv2 POST_BUILD
 	COMMAND lv2-ttl-generator ./ZynAlienWah.so
 	WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/lv2)
+
+file(GLOB ttls "${CMAKE_CURRENT_BINARY_DIR}/lv2/*.ttl")
+install(FILES ${ttls} DESTINATION lib/lv2/ZynAlienWah.lv2/)
diff --git a/src/Plugin/Chorus/CMakeLists.txt b/src/Plugin/Chorus/CMakeLists.txt
index 3a648360..6cca54f5 100644
--- a/src/Plugin/Chorus/CMakeLists.txt
+++ b/src/Plugin/Chorus/CMakeLists.txt
@@ -23,3 +23,6 @@ install(TARGETS ZynChorus_vst LIBRARY DESTINATION lib/vst/)
 add_custom_command(TARGET ZynChorus_lv2 POST_BUILD
 	COMMAND lv2-ttl-generator ./ZynChorus.so
 	WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/lv2)
+
+file(GLOB ttls "${CMAKE_CURRENT_BINARY_DIR}/lv2/*.ttl")
+install(FILES ${ttls} DESTINATION lib/lv2/ZynChorus.lv2/)
diff --git a/src/Plugin/Distortion/CMakeLists.txt b/src/Plugin/Distortion/CMakeLists.txt
index 7aacc8de..a396979f 100644
--- a/src/Plugin/Distortion/CMakeLists.txt
+++ b/src/Plugin/Distortion/CMakeLists.txt
@@ -23,3 +23,6 @@ install(TARGETS ZynDistortion_vst LIBRARY DESTINATION lib/vst/)
 add_custom_command(TARGET ZynDistortion_lv2 POST_BUILD
 	COMMAND lv2-ttl-generator ./ZynDistortion.so
 	WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/lv2)
+
+file(GLOB ttls "${CMAKE_CURRENT_BINARY_DIR}/lv2/*.ttl")
+install(FILES ${ttls} DESTINATION lib/lv2/ZynDistortion.lv2/)
diff --git a/src/Plugin/DynamicFilter/CMakeLists.txt b/src/Plugin/DynamicFilter/CMakeLists.txt
index c5e8b913..8543dd6a 100644
--- a/src/Plugin/DynamicFilter/CMakeLists.txt
+++ b/src/Plugin/DynamicFilter/CMakeLists.txt
@@ -23,3 +23,6 @@ install(TARGETS ZynDynamicFilter_vst LIBRARY DESTINATION lib/vst/)
 add_custom_command(TARGET ZynDynamicFilter_lv2 POST_BUILD
 	COMMAND lv2-ttl-generator ./ZynDynamicFilter.so
 	WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/lv2)
+
+file(GLOB ttls "${CMAKE_CURRENT_BINARY_DIR}/lv2/*.ttl")
+install(FILES ${ttls} DESTINATION lib/lv2/ZynDynamicFilter.lv2/)
diff --git a/src/Plugin/Echo/CMakeLists.txt b/src/Plugin/Echo/CMakeLists.txt
index c7579c45..09ad2a51 100644
--- a/src/Plugin/Echo/CMakeLists.txt
+++ b/src/Plugin/Echo/CMakeLists.txt
@@ -23,3 +23,6 @@ install(TARGETS ZynEcho_vst LIBRARY DESTINATION lib/vst/)
 add_custom_command(TARGET ZynEcho_lv2 POST_BUILD
 	COMMAND lv2-ttl-generator ./ZynEcho.so
 	WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/lv2)
+
+file(GLOB ttls "${CMAKE_CURRENT_BINARY_DIR}/lv2/*.ttl")
+install(FILES ${ttls} DESTINATION lib/lv2/ZynEcho.lv2/)
diff --git a/src/Plugin/Phaser/CMakeLists.txt b/src/Plugin/Phaser/CMakeLists.txt
index 1504c7c9..8226b642 100644
--- a/src/Plugin/Phaser/CMakeLists.txt
+++ b/src/Plugin/Phaser/CMakeLists.txt
@@ -23,3 +23,6 @@ install(TARGETS ZynPhaser_vst LIBRARY DESTINATION lib/vst/)
 add_custom_command(TARGET ZynPhaser_lv2 POST_BUILD
 	COMMAND lv2-ttl-generator ./ZynPhaser.so
 	WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/lv2)
+
+file(GLOB ttls "${CMAKE_CURRENT_BINARY_DIR}/lv2/*.ttl")
+install(FILES ${ttls} DESTINATION lib/lv2/ZynPhaser.lv2/)
diff --git a/src/Plugin/Reverb/CMakeLists.txt b/src/Plugin/Reverb/CMakeLists.txt
index 66d494a1..22ae38c4 100644
--- a/src/Plugin/Reverb/CMakeLists.txt
+++ b/src/Plugin/Reverb/CMakeLists.txt
@@ -23,3 +23,6 @@ install(TARGETS ZynReverb_vst LIBRARY DESTINATION lib/vst/)
 add_custom_command(TARGET ZynReverb_lv2 POST_BUILD
 	COMMAND lv2-ttl-generator ./ZynReverb.so
 	WORKING_DIRECTORY ${CMAKE_CURRENT_BINARY_DIR}/lv2)
+
+file(GLOB ttls "${CMAKE_CURRENT_BINARY_DIR}/lv2/*.ttl")
+install(FILES ${ttls} DESTINATION lib/lv2/ZynReverb.lv2/)
diff --git a/src/Plugin/Reverb/Reverb.cpp b/src/Plugin/Reverb/Reverb.cpp
index faf429fe..6f76bd7f 100644
--- a/src/Plugin/Reverb/Reverb.cpp
+++ b/src/Plugin/Reverb/Reverb.cpp
@@ -78,7 +78,6 @@ protected:
         parameter.hints = kParameterIsInteger;
         parameter.name  = "";
         parameter.unit  = "";
-        parameter.ranges.def = 1.0f;
         parameter.ranges.min = 0.0f;
         parameter.ranges.max = 127.0f;
 
@@ -101,10 +100,14 @@ protected:
         case 3:
             // FIXME: unused
             parameter.name = "bw";
+            parameter.ranges.def = 0.0f;
+            parameter.ranges.max = 1.0f;
             break;
         case 4:
             // FIXME: unused
             parameter.name = "E/R";
+            parameter.ranges.def = 0.0f;
+            parameter.ranges.max = 1.0f;
             break;
         case 5:
             parameter.name = "Low-Pass Filter";
-- 
2.47.0

