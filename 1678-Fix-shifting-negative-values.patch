From 69e9b31398228ace6e46e2f11dca69c3257047bf Mon Sep 17 00:00:00 2001
From: Johannes Lorenz <j.git@lorenz-ho.me>
Date: Tue, 15 Dec 2020 17:05:36 +0100
Subject: [PATCH 1678/1936] Fix shifting negative values

Fix token directly from tlsf master.
---
 tlsf/tlsf.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/tlsf/tlsf.c b/tlsf/tlsf.c
index 027c20c2..5e74557d 100644
--- a/tlsf/tlsf.c
+++ b/tlsf/tlsf.c
@@ -351,11 +351,11 @@ static block_header_t* search_suitable_block(control_t* control, int* fli, int*
 	** First, search for a block in the list associated with the given
 	** fl/sl index.
 	*/
-	unsigned int sl_map = control->sl_bitmap[fl] & (~0 << sl);
+	unsigned int sl_map = control->sl_bitmap[fl] & (~0U << sl);
 	if (!sl_map)
 	{
 		/* No block exists. Search in the next largest first-level list. */
-		const unsigned int fl_map = control->fl_bitmap & (~0 << (fl + 1));
+		const unsigned int fl_map = control->fl_bitmap & (~0U << (fl + 1));
 		if (!fl_map)
 		{
 			/* No free blocks available, memory has been exhausted. */
-- 
2.47.0

