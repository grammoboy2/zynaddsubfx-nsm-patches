From 84530babf7999efd53852138c9f187373bf7ad1f Mon Sep 17 00:00:00 2001
From: fundamental <mark.d.mccurry@gmail.com>
Date: Sat, 7 Nov 2015 11:44:54 -0500
Subject: [PATCH 0700/1936] OscilGenUI: Fix Desynced Fl_Value_Output Widgets

---
 src/UI/OscilGenUI.fl | 13 ++++++++-----
 1 file changed, 8 insertions(+), 5 deletions(-)

diff --git a/src/UI/OscilGenUI.fl b/src/UI/OscilGenUI.fl
index e6527bd6..f78898a5 100644
--- a/src/UI/OscilGenUI.fl
+++ b/src/UI/OscilGenUI.fl
@@ -349,7 +349,7 @@ class OscilEditor {open : {public PresetsUI_}
             code1 {oscilo_base->parent(o);oscilo_base->init(true);}
           } {}
           Fl_Dial bfpar {
-            callback {redrawoscil(); bfparval->value(o->value());}
+            callback {redrawoscil(); if(bfparval){bfparval->value(o->value());}}
             tooltip {Base Function Parameter} xywh {525 285 20 20} minimum -64 maximum 63 step 1
             code0 {o->init("Pbasefuncpar");}
             class Fl_Osc_Dial
@@ -446,6 +446,8 @@ setbfmodstatus(o->value());
           Fl_Value_Output bfparval {
             label {Par.}
             xywh {495 290 25 15} labelsize 12 minimum -63 maximum 63 step 1
+            code0 {o->value(bfpar->value());}
+
           }
           Fl_Group basefuncmodulation {open
             xywh {555 281 169 25} box UP_FRAME
@@ -632,13 +634,14 @@ redrawoscil();}
             }
           }
           Fl_Dial wshpar {
-            callback {redrawoscil(); wsparval->value(o->value());}
+            callback {redrawoscil();if(wsparval){wsparval->value(o->value());}}
             tooltip {Waveshaping Parameter} xywh {265 318 20 20} minimum -64 maximum 63 step 1
             code0 {o->init("Pwaveshaping");}
             class Fl_Osc_Dial
           }
           Fl_Value_Output wsparval {
             xywh {233 321 25 15} labelsize 12 minimum -63 maximum 63 step 1
+            code0 {o->value(wshpar->value());}
           }
         }
         Fl_Light_Button autoclearbutton {
@@ -1010,17 +1013,17 @@ oscils_base->update();} {}
     switch (menuentry){
     case 0:
          bfpar->deactivate();
-	 bfparval->deactivate();
+         bfparval->deactivate();
          basefuncmodulation->deactivate();
          break;
     case 127:
          bfpar->deactivate();
-	 bfparval->deactivate();
+         bfparval->deactivate();
          basefuncmodulation->activate();
          break;
     default:
          bfpar->activate();
-	 bfparval->activate();
+         bfparval->activate();
          basefuncmodulation->activate();
     }
     } {} }
-- 
2.47.0

