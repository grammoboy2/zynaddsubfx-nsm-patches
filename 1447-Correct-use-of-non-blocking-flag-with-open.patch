From 88afeeb027eb3af6254d771509efc71c0ff9c7a2 Mon Sep 17 00:00:00 2001
From: Hans Petter Selasky <hps@selasky.org>
Date: Fri, 15 Nov 2019 12:52:52 +0100
Subject: [PATCH 1447/1936] Correct use of non-blocking flag with open().

Signed-off-by: Hans Petter Selasky <hps@selasky.org>
---
 src/Nio/OssEngine.cpp      | 4 ++--
 src/Nio/OssMultiEngine.cpp | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/Nio/OssEngine.cpp b/src/Nio/OssEngine.cpp
index e88ff005..a3dd252d 100644
--- a/src/Nio/OssEngine.cpp
+++ b/src/Nio/OssEngine.cpp
@@ -216,7 +216,7 @@ bool OssEngine::openAudio()
         device = linux_oss_wave_out_dev;
 
     /* NOTE: PIPEs and FIFOs can block when opening them */
-    audio.handle = open(device, O_WRONLY, O_NONBLOCK);
+    audio.handle = open(device, O_WRONLY | O_NONBLOCK);
     if(audio.handle == -1) {
         cerr << "ERROR - I can't open the "
              << device << '.' << endl;
@@ -354,7 +354,7 @@ bool OssEngine::openMidi()
         device = linux_oss_seq_in_dev;
 
     /* NOTE: PIPEs and FIFOs can block when opening them */
-    handle = open(device, O_RDONLY, O_NONBLOCK);
+    handle = open(device, O_RDONLY | O_NONBLOCK);
 
     if(-1 == handle)
         return false;
diff --git a/src/Nio/OssMultiEngine.cpp b/src/Nio/OssMultiEngine.cpp
index 713d3dbe..833caf60 100644
--- a/src/Nio/OssMultiEngine.cpp
+++ b/src/Nio/OssMultiEngine.cpp
@@ -86,7 +86,7 @@ OssMultiEngine :: openAudio()
         device = linux_oss_wave_out_dev;
 
     /* NOTE: PIPEs and FIFOs can block when opening them */
-    handle = open(device, O_WRONLY, O_NONBLOCK);
+    handle = open(device, O_WRONLY | O_NONBLOCK);
     if (handle == -1) {
         cerr << "ERROR - I can't open the "
             << device << '.' << endl;
-- 
2.47.0

