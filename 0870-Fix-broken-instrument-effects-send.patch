From c308840ece9c043c7bd0642e53ab2056c93de572 Mon Sep 17 00:00:00 2001
From: "Christopher A. Oliver" <caowasteland@gmail.com>
Date: Tue, 23 Feb 2016 13:29:22 -0500
Subject: [PATCH 0870/1936] Fix broken instrument effects send.

---
 src/Misc/Part.cpp | 2 +-
 src/UI/PartUI.fl  | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/Misc/Part.cpp b/src/Misc/Part.cpp
index 3e9a49f9..8c022f50 100644
--- a/src/Misc/Part.cpp
+++ b/src/Misc/Part.cpp
@@ -84,7 +84,7 @@ static const Ports partPorts = {
     rString(info.Pauthor, MAX_INFO_TEXT_SIZE, "Instrument author"),
     rString(info.Pcomments, MAX_INFO_TEXT_SIZE, "Instrument comments"),
     rString(Pname, PART_MAX_NAME_LEN, "User specified label"),
-    rArray(Pefxroute, NUM_PART_EFX,  "Effect Routing"),
+    rArrayI(Pefxroute, NUM_PART_EFX,  "Effect Routing"),
     rArrayT(Pefxbypass, NUM_PART_EFX, "If an effect is bypassed"),
     {"captureMin:", rDoc("Capture minimum valid note"), NULL,
         [](const char *, RtData &r)
diff --git a/src/UI/PartUI.fl b/src/UI/PartUI.fl
index cbc4c2f8..2c3894e1 100644
--- a/src/UI/PartUI.fl
+++ b/src/UI/PartUI.fl
@@ -643,6 +643,7 @@ else {propta->deactivate();proptb->deactivate();}}
         insefftype->oscMove("partefx"+to_s(ninseff)+"/efftype");
         inseffectuigroup->reext("partefx"+to_s(ninseff)+"/");
         bypasseff->oscMove("Pefxbypass"+to_s(ninseff));
+        sendtochoice->oscMove("Pefxroute"+to_s(ninseff));
 /*insefftype->value(part->partefx[ninseff]->geteffect());*/
 //insefftype->do_callback();
 inseffectui->refresh();
-- 
2.47.0

