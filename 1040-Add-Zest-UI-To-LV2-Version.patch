From dd2d44255a138cb7630d26ed065c312d06ba52ee Mon Sep 17 00:00:00 2001
From: fundamental <mark.d.mccurry@gmail.com>
Date: Sun, 2 Oct 2016 15:53:57 -0400
Subject: [PATCH 1040/1936] Add Zest UI To LV2 Version

---
 src/Plugin/ZynAddSubFX/CMakeLists.txt     | 6 +++++-
 src/Plugin/ZynAddSubFX/ZynAddSubFX-UI.cpp | 1 +
 2 files changed, 6 insertions(+), 1 deletion(-)

diff --git a/src/Plugin/ZynAddSubFX/CMakeLists.txt b/src/Plugin/ZynAddSubFX/CMakeLists.txt
index 2cfc7f0b..71da39f9 100644
--- a/src/Plugin/ZynAddSubFX/CMakeLists.txt
+++ b/src/Plugin/ZynAddSubFX/CMakeLists.txt
@@ -55,6 +55,10 @@ add_library(ZynAddSubFX_lv2 SHARED
     ZynAddSubFX.cpp)
 
 add_library(ZynAddSubFX_lv2_ui SHARED
+    ${CMAKE_SOURCE_DIR}/DPF/dgl/src/Geometry.cpp
+    ${CMAKE_SOURCE_DIR}/DPF/dgl/src/Widget.cpp
+    ${CMAKE_SOURCE_DIR}/DPF/dgl/src/Window.cpp
+    ${CMAKE_SOURCE_DIR}/DPF/dgl/src/Application.cpp
     ${CMAKE_SOURCE_DIR}/DPF/distrho/DistrhoUIMain.cpp
     ZynAddSubFX-UI-Zest.cpp)
 
@@ -125,7 +129,7 @@ install(FILES
     ${CMAKE_CURRENT_BINARY_DIR}/lv2/ZynAddSubFX.ttl
     DESTINATION ${PluginLibDir}/lv2/ZynAddSubFX.lv2/)
 
-if(NtkGui OR FltkGui)
+if((NtkGui OR FltkGui OR ZestGui) AND NOT ${CMAKE_SYSTEM_NAME} STREQUAL "Windows")
 set_target_properties(ZynAddSubFX_lv2_ui PROPERTIES COMPILE_DEFINITIONS "DISTRHO_PLUGIN_TARGET_LV2")
 set_target_properties(ZynAddSubFX_lv2_ui PROPERTIES LIBRARY_OUTPUT_DIRECTORY "lv2")
 set_target_properties(ZynAddSubFX_lv2_ui PROPERTIES OUTPUT_NAME "ZynAddSubFX_ui")
diff --git a/src/Plugin/ZynAddSubFX/ZynAddSubFX-UI.cpp b/src/Plugin/ZynAddSubFX/ZynAddSubFX-UI.cpp
index b5215c9f..1daa4a81 100644
--- a/src/Plugin/ZynAddSubFX/ZynAddSubFX-UI.cpp
+++ b/src/Plugin/ZynAddSubFX/ZynAddSubFX-UI.cpp
@@ -27,6 +27,7 @@ public:
     {
         setTitle("ZynAddSubFX");
 
+#error this should not be compiled
 #if DISTRHO_OS_MAC
         extUiPath  = bpath;
         extUiPath += "/zynaddsubfx-ext-gui";
-- 
2.47.0

