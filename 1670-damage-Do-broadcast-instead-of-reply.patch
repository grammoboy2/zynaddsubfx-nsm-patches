From c64ebb2e818cf52402591b86e9d2e4d813bbbe80 Mon Sep 17 00:00:00 2001
From: Johannes Lorenz <j.git@lorenz-ho.me>
Date: Sun, 13 Dec 2020 10:23:10 +0100
Subject: [PATCH 1670/1936] /damage: Do broadcast instead of reply

---
 src/Misc/MiddleWare.cpp | 6 +++---
 src/Synth/OscilGen.cpp  | 4 ++--
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/src/Misc/MiddleWare.cpp b/src/Misc/MiddleWare.cpp
index 100dc374..ad129ea7 100644
--- a/src/Misc/MiddleWare.cpp
+++ b/src/Misc/MiddleWare.cpp
@@ -1452,7 +1452,7 @@ static rtosc::Ports middwareSnoopPortsWithoutNonRtParams = {
         d.obj = (void*)obj->parent;
         real_preset_ports.dispatch(chomp(msg), d);
         if(strstr(msg, "paste") && rtosc_argument_string(msg)[0] == 's')
-            d.reply("/damage", "s", rtosc_argument(msg, 0).s);
+            d.broadcast("/damage", "s", rtosc_argument(msg, 0).s);
         }},
     {"io/", 0, &Nio::ports,               [](const char *msg, RtData &d) {
         Nio::ports.dispatch(chomp(msg), d);}},
@@ -1586,7 +1586,7 @@ static rtosc::Ports middwareSnoopPortsWithoutNonRtParams = {
     {"reset_master:", 0, 0,
         rBegin;
         impl.loadMaster(NULL);
-        d.reply("/damage", "s", "/");
+        d.broadcast("/damage", "s", "/");
         rEnd},
     {"load_xiz:is", 0, 0,
         rBegin;
@@ -1626,7 +1626,7 @@ static rtosc::Ports middwareSnoopPortsWithoutNonRtParams = {
         rBegin;
         int id = extractInt(msg);
         impl.loadClearPart(id);
-        d.reply("/damage", "s", ("/part"+to_s(id)).c_str());
+        d.broadcast("/damage", "s", ("/part"+to_s(id)).c_str());
         rEnd},
     {"undo:", 0, 0,
         rBegin;
diff --git a/src/Synth/OscilGen.cpp b/src/Synth/OscilGen.cpp
index 670354b6..7ade5924 100644
--- a/src/Synth/OscilGen.cpp
+++ b/src/Synth/OscilGen.cpp
@@ -187,7 +187,7 @@ const rtosc::Ports OscilGen::non_realtime_ports = {
             strcpy(repath, d.loc);
             char *edit   = strrchr(repath, '/')+1;
             *edit = 0;
-            d.reply("/damage", "s", repath);
+            d.broadcast("/damage", "s", repath);
         }},
     {"use-as-base:", rProp(non-realtime) rDoc("Translates current waveform into base"),
         NULL, [](const char *, rtosc::RtData &d) {
@@ -197,7 +197,7 @@ const rtosc::Ports OscilGen::non_realtime_ports = {
             strcpy(repath, d.loc);
             char *edit   = strrchr(repath, '/')+1;
             *edit = 0;
-            d.reply("/damage", "s", repath);
+            d.broadcast("/damage", "s", repath);
         }}};
 
 //unused:
-- 
2.47.0

