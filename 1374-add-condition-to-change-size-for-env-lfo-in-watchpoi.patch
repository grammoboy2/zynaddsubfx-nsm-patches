From 0fe8d66990473d6a21cf4ac0afa4a31d990c1f0e Mon Sep 17 00:00:00 2001
From: michiboo <chanmickyyun@gmail.com>
Date: Fri, 21 Jun 2019 14:59:32 +0300
Subject: [PATCH 1374/1936] add condition to change size for env/lfo in
 watchpoint

---
 src/Synth/WatchPoint.cpp | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/src/Synth/WatchPoint.cpp b/src/Synth/WatchPoint.cpp
index 9b95e685..d44177b4 100644
--- a/src/Synth/WatchPoint.cpp
+++ b/src/Synth/WatchPoint.cpp
@@ -100,7 +100,11 @@ void WatchManager::tick(void)
     //Try to send out any vector stuff
     for(int i=0; i<MAX_WATCH; ++i) {
         if(sample_list[i]) {
-            if(accumulate_index[i] >= 127){
+            int framesize = 2;
+            if(strstr(active_list[i], "Envelope") == NULL || strstr(active_list[i], "Lfo") == NULL)
+                framesize = 127;
+            
+            if(accumulate_index[i] >= framesize){
                 char        arg_types[MAX_SAMPLE+1] = {0};
                 rtosc_arg_t arg_val[MAX_SAMPLE];
                 for(int j=0; j<sample_list[i]; ++j) {
@@ -158,7 +162,8 @@ void WatchManager::satisfy(const char *id, float f)
 }
 
 void WatchManager::satisfy(const char *id, float *f, int n)
-{
+{   
+    printf("\nid: %s\n",id);
     int selected = -1;    
     for(int i=0; i<MAX_WATCH; ++i)
         if(!strcmp(active_list[i], id))
-- 
2.47.0

