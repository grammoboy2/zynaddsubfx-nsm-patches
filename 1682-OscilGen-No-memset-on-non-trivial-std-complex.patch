From 8071d2c49d86d3545db50b991c22c2a77b6dc851 Mon Sep 17 00:00:00 2001
From: Johannes Lorenz <j.git@lorenz-ho.me>
Date: Wed, 16 Dec 2020 21:34:41 +0100
Subject: [PATCH 1682/1936] OscilGen: No memset on non trivial std::complex<>

This fixes a compiler warning.
---
 src/Synth/OscilGen.cpp | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/src/Synth/OscilGen.cpp b/src/Synth/OscilGen.cpp
index 630acf18..5f0e4aaf 100644
--- a/src/Synth/OscilGen.cpp
+++ b/src/Synth/OscilGen.cpp
@@ -269,7 +269,8 @@ const rtosc::MergePorts OscilGen::ports{
 //operations on FFTfreqs
 inline void clearAll(fft_t *freqs, int oscilsize)
 {
-    memset(freqs, 0, oscilsize / 2 * sizeof(fft_t));
+    fft_t zero = 0;
+    std::fill_n(freqs, oscilsize / 2, zero);
 }
 
 inline void clearDC(fft_t *freqs)
@@ -1185,8 +1186,8 @@ void OscilGen::getspectrum(int n, float *spc, int what)
     if(what == 0) {
         for(int i = 0; i < n; ++i)
             outoscilFFTfreqs[i] = fft_t(spc[i], spc[i]);
-        memset(outoscilFFTfreqs + n, 0,
-               (synth.oscilsize / 2 - n) * sizeof(fft_t));
+        fft_t zero = 0;
+        std::fill_n(outoscilFFTfreqs + n, synth.oscilsize / 2 - n, zero);
         adaptiveharmonic(outoscilFFTfreqs, 0.0f);
         adaptiveharmonicpostprocess(outoscilFFTfreqs, n - 1);
         for(int i = 0; i < n; ++i)
-- 
2.47.0

