From d92a25e1e4d8542c6135aed923d124a5fe00f9a3 Mon Sep 17 00:00:00 2001
From: Johannes Lorenz <j.git@lorenz-ho.me>
Date: Sat, 19 Oct 2019 08:30:23 +0200
Subject: [PATCH 1437/1936] Implement unique_ptr assign move operator

---
 src/globals.h | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/src/globals.h b/src/globals.h
index fac6d5f3..1d4eb362 100644
--- a/src/globals.h
+++ b/src/globals.h
@@ -274,9 +274,13 @@ class m_unique_ptr
     T* ptr = nullptr;
 public:
     m_unique_ptr() = default;
-    m_unique_ptr(m_unique_ptr&& other) {
+    m_unique_ptr(m_unique_ptr&& other) : ptr(other.ptr) {
+        other.ptr = nullptr;
+    }
+    m_unique_ptr& operator=(m_unique_ptr&& other) {
         ptr = other.ptr;
         other.ptr = nullptr;
+        return *this;
     }
     m_unique_ptr(const m_unique_ptr& other) = delete;
     ~m_unique_ptr() { ptr = nullptr; }
-- 
2.47.0

