From 34d471059ba8d4896b22717e1a5e2c06c14cd977 Mon Sep 17 00:00:00 2001
From: Friedolino <mkirchn@freenet.de>
Date: Sat, 19 Sep 2020 11:00:07 +0200
Subject: [PATCH 1593/1936] fix the savexml port loaded_file should be set on
 loading only

---
 src/Misc/Part.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/Misc/Part.cpp b/src/Misc/Part.cpp
index f0b4ae6c..afdaf473 100644
--- a/src/Misc/Part.cpp
+++ b/src/Misc/Part.cpp
@@ -172,9 +172,10 @@ static const Ports partPorts = {
             Part *p = (Part*)d.obj;
             if (p->loaded_file[0] == '\0') {  // if part was never loaded or saved
                 time_t rawtime;     // make a new name from date and time
+                char filename[32];
                 time (&rawtime);
                 const struct tm* timeinfo = localtime (&rawtime);
-                strftime (p->loaded_file,23,"%F_%R.xiz",timeinfo); 
+                strftime (filename,23,"%F_%R.xiz",timeinfo); 
             }
             p->saveXML(p->loaded_file);
             fprintf(stderr, "Part %d saved to %s\n", (p->partno + 1), p->loaded_file);
-- 
2.47.0

