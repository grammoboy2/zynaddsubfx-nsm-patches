From c13e175cf000fddbe9cb7dbf250e00370ec52db3 Mon Sep 17 00:00:00 2001
From: Friedolino <mkirchn@freenet.de>
Date: Sat, 19 Sep 2020 10:59:17 +0200
Subject: [PATCH 1592/1936] send update notice to clients on bank rescan

---
 src/Misc/MiddleWare.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/Misc/MiddleWare.cpp b/src/Misc/MiddleWare.cpp
index 5f902801..163e9040 100644
--- a/src/Misc/MiddleWare.cpp
+++ b/src/Misc/MiddleWare.cpp
@@ -1000,6 +1000,7 @@ const rtosc::Ports bankPorts = {
                 d.reply("/bankview", "iss", i, "", "");
             }
         }
+        d.broadcast("/damage", "s", "/bank/");
         rEnd},
     {"bank_list:", 0, 0,
         rBegin;
@@ -1286,6 +1287,7 @@ static rtosc::Ports middwareSnoopPorts = {
                     "Failed To Save To Bank Slot, please check file permissions");
             GUI::raiseUi(impl.ui, buffer);
         }
+        else d.broadcast("/damage", "s", "/bank/search_results/");
         rEnd},
     {"config/", 0, &Config::ports,
         rBegin;
-- 
2.47.0

