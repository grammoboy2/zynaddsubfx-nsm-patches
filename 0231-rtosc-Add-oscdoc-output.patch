From 4533f43f318f91913c224ca14e3de122cb023bcf Mon Sep 17 00:00:00 2001
From: fundamental <mark.d.mccurry@gmail.com>
Date: Tue, 2 Sep 2014 14:56:16 -0400
Subject: [PATCH 0231/1936] rtosc: Add oscdoc output

---
 src/main.cpp | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

diff --git a/src/main.cpp b/src/main.cpp
index 6d08e1e1..2e09ee33 100644
--- a/src/main.cpp
+++ b/src/main.cpp
@@ -22,6 +22,7 @@
 
 
 #include <iostream>
+#include <fstream>
 #include <map>
 #include <cmath>
 #include <cctype>
@@ -215,6 +216,9 @@ int main(int argc, char *argv[])
         {
             "exec-after-init", 1, NULL, 'e'
         },
+        {
+            "dump-oscdoc", 2, NULL, 'd'
+        },
         {
             0, 0, 0, 0
         }
@@ -320,6 +324,19 @@ int main(int argc, char *argv[])
             case 'e':
                 GETOP(execAfterInit);
                 break;
+            case 'd':
+                if(optarguments)
+                {
+                    rtosc::OscDocFormatter s;
+                    ofstream outfile(optarguments);
+                    s.prog_name    = "ZynAddSubFX";
+                    s.p            = &Master::ports;
+                    s.uri          = "http://example.com/fake/url.xml";
+                    s.author_first = "Mark";
+                    s.author_last  = "McCurry";
+                    outfile << s;
+                }
+                break;
             case '?':
                 cerr << "ERROR:Bad option or parameter.\n" << endl;
                 exitwithhelp = 1;
@@ -352,6 +369,7 @@ int main(int argc, char *argv[])
              << "  -O , --output\t\t\t\t Set Output Engine\n"
              << "  -I , --input\t\t\t\t Set Input Engine\n"
              << "  -e , --exec-after-init\t\t Run post-initialization script\n"
+             << "  -d , --dump-oscdoc=FILE\t\t Dump oscdoc xml to file\n"
              << endl;
 
         return 0;
-- 
2.47.0

