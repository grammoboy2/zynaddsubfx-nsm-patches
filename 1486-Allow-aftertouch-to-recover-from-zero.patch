From d2764c9ad300d9f83e8012ce1f1b27edd54d67d0 Mon Sep 17 00:00:00 2001
From: Hans Petter Selasky <hps@selasky.org>
Date: Thu, 2 Apr 2020 23:33:33 +0200
Subject: [PATCH 1486/1936] Allow aftertouch to recover from zero.

The ROLI seaboard uses this.

Signed-off-by: Hans Petter Selasky <hps@selasky.org>
---
 src/Misc/Master.cpp | 13 ++++---------
 1 file changed, 4 insertions(+), 9 deletions(-)

diff --git a/src/Misc/Master.cpp b/src/Misc/Master.cpp
index f5b2133b..c2fc10fb 100644
--- a/src/Misc/Master.cpp
+++ b/src/Misc/Master.cpp
@@ -973,15 +973,10 @@ void Master::noteOff(char chan, note_t note)
  */
 void Master::polyphonicAftertouch(char chan, note_t note, char velocity)
 {
-    if(velocity) {
-        for(int npart = 0; npart < NUM_MIDI_PARTS; ++npart)
-            if(chan == part[npart]->Prcvchn)
-                if(part[npart]->Penabled)
-                    part[npart]->PolyphonicAftertouch(note, velocity);
-
-    }
-    else
-        this->noteOff(chan, note);
+    for(int npart = 0; npart < NUM_MIDI_PARTS; ++npart)
+        if(chan == part[npart]->Prcvchn)
+            if(part[npart]->Penabled)
+                part[npart]->PolyphonicAftertouch(note, velocity);
 }
 
 /*
-- 
2.47.0

