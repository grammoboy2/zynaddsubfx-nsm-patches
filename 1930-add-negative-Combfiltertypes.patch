From 2456ef3689cf58fd6ec9c240b7a0fa499f2b844b Mon Sep 17 00:00:00 2001
From: Friedolino <mkirchn@freenet.de>
Date: Wed, 22 Nov 2023 17:28:25 +0100
Subject: [PATCH 1930/1936] add negative Combfiltertypes

---
 src/DSP/CombFilter.cpp      | 12 ++++++++++++
 src/Params/FilterParams.cpp |  2 +-
 2 files changed, 13 insertions(+), 1 deletion(-)

diff --git a/src/DSP/CombFilter.cpp b/src/DSP/CombFilter.cpp
index bfb7efbe..2cea8aa9 100644
--- a/src/DSP/CombFilter.cpp
+++ b/src/DSP/CombFilter.cpp
@@ -113,6 +113,18 @@ void CombFilter::settype(unsigned char type_)
             gainfwd = q;
             gainbwd = q;
             break;
+        case 3:
+            gainfwd = 0.0f;
+            gainbwd = -q;
+            break;
+        case 4:
+            gainfwd = -q;
+            gainbwd = 0.0f;
+            break;
+        case 5:
+            gainfwd = -q;
+            gainbwd = -q;
+            break;
     }
 }
 
diff --git a/src/Params/FilterParams.cpp b/src/Params/FilterParams.cpp
index 86698fb0..5cda248c 100644
--- a/src/Params/FilterParams.cpp
+++ b/src/Params/FilterParams.cpp
@@ -173,7 +173,7 @@ const rtosc::Ports FilterParams::ports = {
         rOptions(HP, BP, LP)
             rDoc("Filter Type"), 0, rOptionCb(Ptype)},
     {"type-comb::i:c:S", rProp(parameter) rProp(enumerated) rShort("type")
-        rOptions(BWD, FWD, both)
+        rOptions(BWD, FWD, both, BWDN, FWDN, bothN)
             rDoc("Comb Filter Type"), 0, rOptionCb(Ptype)},
     //UI reader
     {"Pvowels:", rDoc("Get Formant Vowels"), NULL,
-- 
2.47.0

