From 24483dc55426ca4617c236df736081ea2a4474a1 Mon Sep 17 00:00:00 2001
From: fundamental <mark.d.mccurry@gmail.com>
Date: Sat, 8 May 2021 19:47:31 -0400
Subject: [PATCH 1727/1936] Build SaveOsc only on non-windows

Apparently it works with only _some_ versions of mingw.
---
 src/Tests/CMakeLists.txt | 17 +++++++++--------
 1 file changed, 9 insertions(+), 8 deletions(-)

diff --git a/src/Tests/CMakeLists.txt b/src/Tests/CMakeLists.txt
index 81f318a0..be6b1e56 100644
--- a/src/Tests/CMakeLists.txt
+++ b/src/Tests/CMakeLists.txt
@@ -62,13 +62,14 @@ if(NOT (${CMAKE_SYSTEM_NAME} STREQUAL "Windows"))
         cp_script(check-ports.rb)
         add_test(PortChecker check-ports.rb)
     endif()
+    add_executable(save-osc SaveOSC.cpp)
+    target_link_libraries(save-osc
+        zynaddsubfx_core zynaddsubfx_nio
+        zynaddsubfx_gui_bridge
+        ${GUI_LIBRARIES} ${NIO_LIBRARIES} ${AUDIO_LIBRARIES}
+        ${PLATFORM_LIBRARIES})
+    #this will be replaced with a for loop when the code will get more stable:
+    add_test(SaveOsc save-osc ${CMAKE_CURRENT_SOURCE_DIR}/../../instruments/examples/Arpeggio\ 1.xmz)
+
 endif()
 
-add_executable(save-osc SaveOSC.cpp)
-target_link_libraries(save-osc
-                      zynaddsubfx_core zynaddsubfx_nio
-                      zynaddsubfx_gui_bridge
-                      ${GUI_LIBRARIES} ${NIO_LIBRARIES} ${AUDIO_LIBRARIES}
-                      ${PLATFORM_LIBRARIES})
-#this will be replaced with a for loop when the code will get more stable:
-add_test(SaveOsc save-osc ${CMAKE_CURRENT_SOURCE_DIR}/../../instruments/examples/Arpeggio\ 1.xmz)
-- 
2.47.0

