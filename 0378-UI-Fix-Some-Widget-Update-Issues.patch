From 449811bf09f58a55d34ad6fa025da469983f2378 Mon Sep 17 00:00:00 2001
From: fundamental <mark.d.mccurry@gmail.com>
Date: Fri, 27 Feb 2015 20:28:48 -0500
Subject: [PATCH 0378/1936] UI: Fix Some Widget Update Issues

---
 src/UI/ADnoteUI.fl   | 6 ++++--
 src/UI/EnvelopeUI.fl | 4 +---
 2 files changed, 5 insertions(+), 5 deletions(-)

diff --git a/src/UI/ADnoteUI.fl b/src/UI/ADnoteUI.fl
index ad0a083c..79e6dca9 100644
--- a/src/UI/ADnoteUI.fl
+++ b/src/UI/ADnoteUI.fl
@@ -585,7 +585,7 @@ voiceonbutton->redraw();} open
             } {}
             Fl_Slider {} {
               label {Frequency Spread}
-              callback {//unisonspreadoutput->do_callback();}
+              callback {unisonspreadoutput->update();}
               tooltip {Frequency Spread of the Unison} xywh {95 562 125 13} type {Horz Knob} box NO_BOX labelsize 12 align 1 maximum 127 step 1 value 64
               code0 {o->init("Unison_frequency_spread", 'i');}
               class Fl_Osc_Slider
@@ -712,7 +712,7 @@ o->redraw();}
             class Fl_Osc_Check
           }
         }
-        Fl_Group {} {
+        Fl_Group activeVoiceID {
           label 01
           xywh {5 5 55 35} box THIN_UP_BOX labeltype EMBOSSED_LABEL labelfont 1 labelsize 22 align 16
           code0 {char tmp[10];snprintf(tmp,10,"%d",nvoice+1);o->label(strdup(tmp));}
@@ -802,6 +802,8 @@ delete(oscedit);
   } {
     code {nvoice = nvoice_;
     loc = base+"voice"+to_s(nvoice)+"/";
+    char tmp[10];snprintf(tmp,10,"%d",nvoice+1);
+    activeVoiceID->label(strdup(tmp));
 ADnoteVoiceParameters->rebase(base+"voice"+to_s(nvoice)+"/");} {selected
     }
   }
diff --git a/src/UI/EnvelopeUI.fl b/src/UI/EnvelopeUI.fl
index def5b8f1..9d8b9da7 100644
--- a/src/UI/EnvelopeUI.fl
+++ b/src/UI/EnvelopeUI.fl
@@ -534,9 +534,7 @@ refresh();} {}
   }
   Function {rebase(std::string new_base)} {open
   } {
-    code {printf("\\n\\n\\n\\nCAT DOG\\n\\n\\n\\n");
-    printf("\\nNEW BASE: '%s'\\n", (new_base+ext).c_str());
-    Fl_Osc_Group::rebase(new_base);
+    code {Fl_Osc_Group::rebase(new_base);
     freemodeeditwindow->rebase(new_base+ext);} {}
   }
   Function {reinit()} {open
-- 
2.47.0

