From 1ce2503f0cc8823560b740f8dbe96cfae901e2ec Mon Sep 17 00:00:00 2001
From: Johannes Lorenz <j.git@lorenz-ho.me>
Date: Tue, 13 Dec 2022 19:42:22 +0100
Subject: [PATCH 1894/1936] Add more default values

---
 src/Effects/Alienwah.cpp      |  1 +
 src/Effects/Chorus.cpp        |  1 +
 src/Effects/Distortion.cpp    |  1 +
 src/Effects/DynamicFilter.cpp |  1 +
 src/Effects/EQ.cpp            |  7 ++++++-
 src/Effects/Echo.cpp          |  5 +++--
 src/Effects/Phaser.cpp        |  1 +
 src/Effects/Reverb.cpp        |  1 +
 src/Effects/Sympathetic.cpp   |  1 +
 src/Params/EnvelopeParams.cpp | 13 ++++++++++++-
 src/Params/FilterParams.cpp   |  6 ++++--
 11 files changed, 32 insertions(+), 6 deletions(-)

diff --git a/src/Effects/Alienwah.cpp b/src/Effects/Alienwah.cpp
index 41c25245..7ad1097b 100644
--- a/src/Effects/Alienwah.cpp
+++ b/src/Effects/Alienwah.cpp
@@ -28,6 +28,7 @@ using std::complex;
 rtosc::Ports Alienwah::ports = {
     {"preset::i", rProp(parameter)
                   rOptions(wah 1, wah 2, wah 3, wah 4)
+                  rDefault(0)
                   rDoc("Instrument Presets"), 0,
                   rBegin;
                   rObject *o = (rObject*)d.obj;
diff --git a/src/Effects/Chorus.cpp b/src/Effects/Chorus.cpp
index 65e8074a..75e9b55f 100644
--- a/src/Effects/Chorus.cpp
+++ b/src/Effects/Chorus.cpp
@@ -29,6 +29,7 @@ rtosc::Ports Chorus::ports = {
     {"preset::i", rProp(parameter)
                   rOptions(Chorus1, Chorus2, Chorus3, Celeste1, Celeste2,
                            Flange1, Flange2, Flange3, Flange4, Flange5)
+                  rDefault(0)
                   rDoc("Instrument Presets"), 0,
                   rBegin;
                   rObject *o = (rObject*)d.obj;
diff --git a/src/Effects/Distortion.cpp b/src/Effects/Distortion.cpp
index 51b3be9a..1194fce1 100644
--- a/src/Effects/Distortion.cpp
+++ b/src/Effects/Distortion.cpp
@@ -29,6 +29,7 @@ rtosc::Ports Distortion::ports = {
     {"preset::i", rProp(parameter)
                   rOptions(Overdrive 1, Overdrive 2, A. Exciter 1, A. Exciter 2, Guitar Amp,
                     Quantisize)
+                  rDefault(0)
                   rDoc("Instrument Presets"), 0,
                   rBegin;
                   rObject *o = (rObject*)d.obj;
diff --git a/src/Effects/DynamicFilter.cpp b/src/Effects/DynamicFilter.cpp
index 9ca53933..03139696 100644
--- a/src/Effects/DynamicFilter.cpp
+++ b/src/Effects/DynamicFilter.cpp
@@ -28,6 +28,7 @@ namespace zyn {
 
 rtosc::Ports DynamicFilter::ports = {
     {"preset::i", rOptions(WahWah, AutoWah, Sweep, VocalMorph1, VocalMorph2)
+                  rDefault(0)
                   rDoc("Instrument Presets"), 0,
                   rBegin;
                   rObject *o = (rObject*)d.obj;
diff --git a/src/Effects/EQ.cpp b/src/Effects/EQ.cpp
index 3936cc48..13425529 100644
--- a/src/Effects/EQ.cpp
+++ b/src/Effects/EQ.cpp
@@ -37,27 +37,31 @@ using rtosc::RtData;
 
 static rtosc::Ports filterports {
     {"Ptype::i:S", rProp(parameter) rProp(enumerated) rOptions(Off, LP1, HP1, LP2,
-            HP2, BP, notch, peak, l.shelf, h.shelf)
+            HP2, BP, notch, peak, l.shelf, h.shelf) rDefault(0)
         rShort("type") rDoc("Filter Type"), 0,
         rBegin;
         rEQ(0);
         rEnd},
     {"Pfreq::i", rProp(parameter) rMap(min, 0) rMap(max, 127)
+        rDefault(64)
         rShort("freq"), 0,
         rBegin;
         rEQ(1);
         rEnd},
     {"Pgain::i", rProp(parameter) rMap(min, 0) rMap(max, 127)
+        rDefault(64)
         rShort("gain"), 0,
         rBegin;
         rEQ(2);
         rEnd},
     {"Pq::i",    rProp(parameter) rMap(min, 0) rMap(max, 127)
+        rDefault(64)
         rShort("q") rDoc("Resonance/Bandwidth"), 0,
         rBegin;
         rEQ(3);
         rEnd},
     {"Pstages::i", rProp(parameter) rMap(min, 0) rMap(max, 4)
+        rDefault(0)
         rShort("stages") rDoc("Additional filter stages"), 0,
         rBegin;
         rEQ(4);
@@ -65,6 +69,7 @@ static rtosc::Ports filterports {
 };
 
 rtosc::Ports EQ::ports = {
+    rEffParVol(rDefault(67)),
     {"filter#8/", 0, &filterports,
         rBegin;
         (void)obj;
diff --git a/src/Effects/Echo.cpp b/src/Effects/Echo.cpp
index 4ba175bf..e57c4dd3 100644
--- a/src/Effects/Echo.cpp
+++ b/src/Effects/Echo.cpp
@@ -29,7 +29,8 @@ namespace zyn {
 
 rtosc::Ports Echo::ports = {
     {"preset::i", rOptions(Echo 1, Echo 2, Echo 3, Simple Echo, Canyon, Panning Echo 1,
-            Panning Echo 2, Panning Echo 3, Feedback Echo)
+                           Panning Echo 2, Panning Echo 3, Feedback Echo)
+                  rDefault(0)
                   rProp(parameter)
                   rDoc("Instrument Presets"), 0,
                   rBegin;
@@ -43,7 +44,7 @@ rtosc::Ports Echo::ports = {
     rEffParVol(rDefaultDepends(presetOfVolume), rDefault(67),
         rPresetsAt(6, 81, 81, 62),
         rPresetsAt(16, 33, 33, 33, 33, 33, 33, 40, 40, 31)),
-    rEffParPan(rPresetsAt(2, 75, 60, 60, 64, 60, 60, 64)),
+    rEffParPan(rPresetsAt(2, 75, 60, 60, 64, 60, 60)),
     rEffPar(Pdelay,   2, rShort("delay"), rLinear(0, 127),
             rPresets(35, 21, 60, 44, 102, 44, 46, 26, 28),
             "Length of Echo"),
diff --git a/src/Effects/Phaser.cpp b/src/Effects/Phaser.cpp
index 6ff12ae9..cfed346b 100644
--- a/src/Effects/Phaser.cpp
+++ b/src/Effects/Phaser.cpp
@@ -46,6 +46,7 @@ rtosc::Ports Phaser::ports = {
                            Phaser 5, Phaser 6,
                            APhaser 1, APhaser 2, APhaser 3, APhaser 4,
                            APhaser 5, APhaser 6)
+                  rDefault(0)
                   rDoc("Instrument Presets"), 0,
                   rBegin;
                   rObject *o = (rObject*)d.obj;
diff --git a/src/Effects/Reverb.cpp b/src/Effects/Reverb.cpp
index 252ea063..e9378d6f 100644
--- a/src/Effects/Reverb.cpp
+++ b/src/Effects/Reverb.cpp
@@ -30,6 +30,7 @@ rtosc::Ports Reverb::ports = {
     {"preset::i", rOptions(Cathedral1, Cathedral2, Cathedral3,
             Hall1, Hall2, Room1, Room2, Basement,
             Tunnel, Echoed1, Echoed2, VeryLong1, VeryLong2)
+                  rDefault(0)
                   rProp(parameter)
                   rDoc("Instrument Presets"), 0,
                   rBegin;
diff --git a/src/Effects/Sympathetic.cpp b/src/Effects/Sympathetic.cpp
index 7a6bd16e..dd48be82 100644
--- a/src/Effects/Sympathetic.cpp
+++ b/src/Effects/Sympathetic.cpp
@@ -33,6 +33,7 @@ namespace zyn {
 rtosc::Ports Sympathetic::ports = {
     {"preset::i", rProp(parameter)
                   rOptions(Generic, Piano, Grand, Guitar, 12-String)
+                  rDefault(0)
                   rDoc("Instrument Presets"), 0,
                   rBegin;
                   rObject *o = (rObject*)d.obj;
diff --git a/src/Params/EnvelopeParams.cpp b/src/Params/EnvelopeParams.cpp
index e06ceb37..6379cbbf 100644
--- a/src/Params/EnvelopeParams.cpp
+++ b/src/Params/EnvelopeParams.cpp
@@ -101,7 +101,18 @@ static const rtosc::Ports localPorts = {
             rDefault(2),
             "Location of the sustain point"),
     rParamsDT(envdt,  MAX_ENVELOPE_POINTS, "Envelope Delay Times"),
-    rParams(Penvval, MAX_ENVELOPE_POINTS, "Envelope Values"),
+    rParams(Penvval, MAX_ENVELOPE_POINTS,
+        rEnabledBy(Pfreemode),
+        rDefault([64 64 ...]),
+        rPreset(ad_global_amp, [0 127 127 0 64 64 ...]),
+        rPreset(ad_voice_amp, [0 127 127 0 64 64 ...]),
+        rPreset(ad_voice_fm_amp, [0 127 127 0 64 64 ...]),
+        rPreset(ad_voice_fm_freq, [20 64 40 64 64 ...]),
+        rPreset(ad_voice_freq, [30 64 64 ...]),
+        rPreset(ad_voice_filter, [90 40 64 40 64 64 ...]),
+        rPreset(sub_bandwidth, [100 64 64 ...]),
+        rPreset(sub_freq, [30 64 64 ...]),
+        rDefaultDepends(loc), "Envelope Values"),
     rParamZyn(Penvstretch,  rShort("stretch"), rDefaultDepends(loc),
             rPresetAtMulti(0, ad_global_freq, ad_global_filter,
                               ad_voice_freq, ad_voice_filter, ad_voice_fm_freq,
diff --git a/src/Params/FilterParams.cpp b/src/Params/FilterParams.cpp
index e9af1fdf..060f7586 100644
--- a/src/Params/FilterParams.cpp
+++ b/src/Params/FilterParams.cpp
@@ -35,7 +35,7 @@ constexpr int sizeof_pvowels = sizeof(FilterParams::Pvowels);
 #define rObject FilterParams::Pvowels_t::formants_t
 
 static const rtosc::Ports subsubports = {
-    rParamZyn(freq, rShort("f.freq"), "Formant frequency"),
+    rParamZyn(freq, rShort("f.freq"), rDefault(128), "Formant frequency"),
     rParamZyn(amp,  rShort("f.str"),  rDefault(127), "Strength of formant"),
     rParamZyn(q,    rShort("f.q"),    rDefault(64),
               "The formant's quality factor, also known as "
@@ -116,7 +116,9 @@ const rtosc::Ports FilterParams::ports = {
     rToggle(Psequencereversed,  rShort("reverse"),
             rDefault(false), "If the modulator input is inverted"),
 
-    {"vowel_seq#" STRINGIFY(FF_MAX_SEQUENCE) "::i", rShort("vowel") rDoc("Vowel number of this sequence position"), NULL,
+    {"vowel_seq#" STRINGIFY(FF_MAX_SEQUENCE) "::i", rShort("vowel") rProp(parameter)
+        rDefault([0 1 2 3 4 5 0 1])
+        rDoc("Vowel number of this sequence position"), NULL,
         [](const char *msg, RtData &d){
             FilterParams *obj = (FilterParams *) d.obj;
             const char *mm = msg;
-- 
2.47.0

