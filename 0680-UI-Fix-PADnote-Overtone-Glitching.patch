From f0f3e502c01dc80492e9da8d50fb5504e22288b8 Mon Sep 17 00:00:00 2001
From: fundamental <mark.d.mccurry@gmail.com>
Date: Wed, 4 Nov 2015 19:57:37 -0500
Subject: [PATCH 0680/1936] UI: Fix PADnote Overtone Glitching

Previously when /oscilsize was obtained the overtones were forgotten
---
 src/UI/Fl_PADnoteOvertonePosition.h | 16 +++++++++-------
 1 file changed, 9 insertions(+), 7 deletions(-)

diff --git a/src/UI/Fl_PADnoteOvertonePosition.h b/src/UI/Fl_PADnoteOvertonePosition.h
index 9240f780..032fb005 100644
--- a/src/UI/Fl_PADnoteOvertonePosition.h
+++ b/src/UI/Fl_PADnoteOvertonePosition.h
@@ -90,13 +90,15 @@ class PADnoteOvertonePosition: public Fl_Box, public Fl_Osc_Widget
                 mode = x;
                 regenerateOvertones();
             } else if(!strcmp(name, "oscilsize")) {
-                nsamples = x/2;
-                delete [] spc;
-                delete [] nhr;
-                spc = new float[nsamples];
-                nhr = new float[nsamples];
-                memset(spc, 0, nsamples*sizeof(float));
-                memset(nhr, 0, nsamples*sizeof(float));
+                if(x/2 != (int)nsamples) {
+                    nsamples = x/2;
+                    delete [] spc;
+                    delete [] nhr;
+                    spc = new float[nsamples];
+                    nhr = new float[nsamples];
+                    memset(spc, 0, nsamples*sizeof(float));
+                    memset(nhr, 0, nsamples*sizeof(float));
+                }
             }
         }
 
-- 
2.47.0

