From 0321d13c497fed163e125590be04a78d26271fc8 Mon Sep 17 00:00:00 2001
From: fundamental <mark.d.mccurry@gmail.com>
Date: Tue, 17 May 2016 15:22:50 -0400
Subject: [PATCH 0907/1936] Add Option To Clear MIDI Learn Bindings

---
 rtosc                   | 2 +-
 src/Misc/MiddleWare.cpp | 4 ++++
 src/UI/MasterUI.fl      | 5 +++++
 3 files changed, 10 insertions(+), 1 deletion(-)

diff --git a/rtosc b/rtosc
index ed48ff37..300bf77e 160000
--- a/rtosc
+++ b/rtosc
@@ -1 +1 @@
-Subproject commit ed48ff379f38b5959d53fc5385ade3d20220cd3f
+Subproject commit 300bf77e3e1eba7b3907038b2553c4abddbf809f
diff --git a/src/Misc/MiddleWare.cpp b/src/Misc/MiddleWare.cpp
index b1642918..0aa3d6ab 100644
--- a/src/Misc/MiddleWare.cpp
+++ b/src/Misc/MiddleWare.cpp
@@ -1026,6 +1026,10 @@ static rtosc::Ports middwareSnoopPorts = {
         xml.loadXMLfile(file);
         loadMidiLearn(xml, impl.midi_mapper);
         rEnd},
+    {"clear_xlz:", 0, 0,
+        rBegin;
+        impl.midi_mapper.clear();
+        rEnd},
     //scale file stuff
     {"load_xsz:s", 0, 0,
         rBegin;
diff --git a/src/UI/MasterUI.fl b/src/UI/MasterUI.fl
index 4c278766..61bd65f5 100644
--- a/src/UI/MasterUI.fl
+++ b/src/UI/MasterUI.fl
@@ -312,6 +312,11 @@ if (filename==NULL) return;
 osc->write("/load_xlz", "s", filename);}
               xywh {40 40 100 20}
             }
+            MenuItem {} {
+              label {Clear Midi Learn...}
+              callback {osc->write("/clear_xlz", "");}
+              xywh {40 40 100 20}
+            }
             MenuItem {} {
               label {Save Midi Learn...}
               callback {char *filename;
-- 
2.47.0

