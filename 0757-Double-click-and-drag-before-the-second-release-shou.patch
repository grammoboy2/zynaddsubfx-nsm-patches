From bcb7a8f38e4d2e100b8ed7e57bee09c8727b97db Mon Sep 17 00:00:00 2001
From: "Christopher A. Oliver" <caowasteland@gmail.com>
Date: Tue, 24 Nov 2015 23:15:43 -0500
Subject: [PATCH 0757/1936] Double click and drag before the second release
 should reset valuator.

---
 src/UI/Fl_Osc_Slider.cpp | 2 ++
 src/UI/WidgetPDial.cpp   | 2 ++
 2 files changed, 4 insertions(+)

diff --git a/src/UI/Fl_Osc_Slider.cpp b/src/UI/Fl_Osc_Slider.cpp
index ba70d46a..a2a6461a 100644
--- a/src/UI/Fl_Osc_Slider.cpp
+++ b/src/UI/Fl_Osc_Slider.cpp
@@ -185,6 +185,8 @@ int Fl_Osc_Slider::handle(int ev, int X, int Y, int W, int H)
 
             int delta = (horizontal() ? Fl::event_x() : Fl::event_y())
                 - start_pos;
+            if (delta < -1 || delta > 1)
+                Fl::event_clicks(0);
             float new_value;
             if (slow_state == 1) {
                 new_value = old_value + delta / denominator;
diff --git a/src/UI/WidgetPDial.cpp b/src/UI/WidgetPDial.cpp
index 9a52a639..90a2a3fc 100644
--- a/src/UI/WidgetPDial.cpp
+++ b/src/UI/WidgetPDial.cpp
@@ -85,6 +85,8 @@ int WidgetPDial::handle(int event)
                 break;
             }
             dy = old_y - Fl::event_y();
+            if (dy < -1 || dy > 1)
+                Fl::event_clicks(0);
 
             if (!integer_step && mod_state == MOD_MASK)
                 dragsize = 200000.0f;
-- 
2.47.0

