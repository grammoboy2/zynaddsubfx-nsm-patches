From ac302e110402a415cd1e6582d3f35bfca9bc4611 Mon Sep 17 00:00:00 2001
From: fundamental <mark.d.mccurry@gmail.com>
Date: Sat, 10 Oct 2015 13:17:36 -0400
Subject: [PATCH 0586/1936] OscilGenUI: Fix Use As Base Button

---
 src/Synth/OscilGen.cpp | 4 ++++
 src/UI/OscilGenUI.fl   | 2 +-
 2 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/src/Synth/OscilGen.cpp b/src/Synth/OscilGen.cpp
index 220dfc52..885cb81f 100644
--- a/src/Synth/OscilGen.cpp
+++ b/src/Synth/OscilGen.cpp
@@ -153,6 +153,10 @@ const rtosc::Ports OscilGen::ports = {
         NULL, [](const char *, rtosc::RtData &d) {
             ((OscilGen*)d.obj)->convert2sine();
         }},
+    {"use-as-base:", rProp(non-realtime) rDoc("Translates current waveform into base"),
+        NULL, [](const char *, rtosc::RtData &d) {
+            ((OscilGen*)d.obj)->useasbase();
+        }},
     {"prepare:b", rProp(internal) rProp(non-realtime) rProp(pointer) rDoc("Sets prepared fft data"),
         NULL, [](const char *m, rtosc::RtData &d) {
             //fprintf(stderr, "prepare:b got a message from '%s'\n", m);
diff --git a/src/UI/OscilGenUI.fl b/src/UI/OscilGenUI.fl
index bbb4ecb5..6eb9eb85 100644
--- a/src/UI/OscilGenUI.fl
+++ b/src/UI/OscilGenUI.fl
@@ -493,7 +493,7 @@ redrawoscil();}
         }
         Fl_Button {} {
           label {Use as base}
-          callback {//oscil->useasbase();
+          callback {osc->requestValue(loc+"use-as-base");
 if (autoclearbutton->value()){
    for (int i=0;i<(MAX_AD_HARMONICS - 1);i++){
       h[i]->mag->value(64);
-- 
2.47.0

