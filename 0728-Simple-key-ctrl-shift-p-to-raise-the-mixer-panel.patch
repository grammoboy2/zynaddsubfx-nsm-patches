From 20d47c87f804ef1de1d90e73e34cd603f3a8d2d0 Mon Sep 17 00:00:00 2001
From: "Christopher A. Oliver" <caowasteland@gmail.com>
Date: Mon, 16 Nov 2015 11:07:54 -0500
Subject: [PATCH 0728/1936] Simple key (ctrl+shift+p) to raise the mixer panel.

---
 src/UI/Connection.cpp | 9 ++++++---
 src/UI/guimain.cpp    | 8 ++++++--
 2 files changed, 12 insertions(+), 5 deletions(-)

diff --git a/src/UI/Connection.cpp b/src/UI/Connection.cpp
index 5395a233..b38d5cec 100644
--- a/src/UI/Connection.cpp
+++ b/src/UI/Connection.cpp
@@ -30,12 +30,14 @@ class MasterUI *ui;
 static Fl_Tiled_Image *module_backdrop;
 #endif
 
-int undo_redo_show_handler(int)
+int kb_shortcut_handler(int)
 {
     const bool undo_ = Fl::event_ctrl() && Fl::event_key() == 'z';
     const bool redo = Fl::event_ctrl() && Fl::event_key() == 'r';
     const bool show = Fl::event_ctrl() && Fl::event_shift() &&
         Fl::event_key() == 's';
+    const bool panel = Fl::event_ctrl() && Fl::event_shift() &&
+        Fl::event_key() == 'p';
     if(undo_)
         ui->osc->write("/undo", "");
     else if(redo)
@@ -43,7 +45,8 @@ int undo_redo_show_handler(int)
     else if (show) {
         ui->simplemasterwindow->hide();
         ui->masterwindow->show();
-    }
+    } else if (panel)
+        ui->panelwindow->show();
     return undo_ || redo || show;
 }
 
@@ -123,7 +126,7 @@ ui_handle_t GUI::createUi(Fl_Osc_Interface *osc, void *exit)
     //tree->osc           = osc;
     //midi_win->show();
 
-    Fl::add_handler(undo_redo_show_handler);
+    Fl::add_handler(kb_shortcut_handler);
     return (void*) (ui = new MasterUI((int*)exit, osc));
 }
 void GUI::destroyUi(ui_handle_t ui)
diff --git a/src/UI/guimain.cpp b/src/UI/guimain.cpp
index 2997db9b..5cbaaace 100644
--- a/src/UI/guimain.cpp
+++ b/src/UI/guimain.cpp
@@ -89,12 +89,14 @@ class MasterUI *ui=0;
 static Fl_Tiled_Image *module_backdrop;
 #endif
 
-int undo_redo_show_handler(int)
+int kb_shortcut_handler(int)
 {
     const bool undo_ = Fl::event_ctrl() && Fl::event_key() == 'z';
     const bool redo = Fl::event_ctrl() && Fl::event_key() == 'r';
     const bool show = Fl::event_ctrl() && Fl::event_shift() &&
         Fl::event_key() == 's';
+    const bool panel = Fl::event_ctrl() && Fl::event_shift() &&
+        Fl::event_key() == 'p';
     if(undo_)
         ui->osc->write("/undo", "");
     else if(redo)
@@ -103,6 +105,8 @@ int undo_redo_show_handler(int)
         ui->simplemasterwindow->hide();
         ui->masterwindow->show();
     }
+    else if (panel)
+        ui->panelwindow->show();
     return undo_ || redo || show;
 }
 
@@ -182,7 +186,7 @@ ui_handle_t GUI::createUi(Fl_Osc_Interface *osc, void *exit)
     //tree->osc           = osc;
     //midi_win->show();
 
-    Fl::add_handler(undo_redo_show_handler);
+    Fl::add_handler(kb_shortcut_handler);
     return (void*) (ui = new MasterUI((int*)exit, osc));
 }
 void GUI::destroyUi(ui_handle_t ui)
-- 
2.47.0

