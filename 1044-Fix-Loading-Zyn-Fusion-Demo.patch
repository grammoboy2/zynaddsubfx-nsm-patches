From a95fadd348fa52ba2cea2d17e7549508a01712f6 Mon Sep 17 00:00:00 2001
From: fundamental <mark.d.mccurry@gmail.com>
Date: Mon, 3 Oct 2016 19:29:53 -0400
Subject: [PATCH 1044/1936] Fix Loading Zyn-Fusion Demo

---
 src/Misc/Master.cpp | 8 ++++++++
 src/main.cpp        | 2 +-
 2 files changed, 9 insertions(+), 1 deletion(-)

diff --git a/src/Misc/Master.cpp b/src/Misc/Master.cpp
index 6df24ea7..c2df3ba4 100644
--- a/src/Misc/Master.cpp
+++ b/src/Misc/Master.cpp
@@ -907,6 +907,14 @@ bool Master::AudioOut(float *outr, float *outl)
     //update the global frame timer
     time++;
 
+#ifdef DEMO_VERSION
+    double seconds = time.time()*synth.buffersize_f/synth.samplerate_f;
+    if(seconds > 10*60) {//10 minute trial
+        shutup = true;
+    }
+#endif
+
+
     return true;
 }
 
diff --git a/src/main.cpp b/src/main.cpp
index 251c53e0..9a7f8d40 100644
--- a/src/main.cpp
+++ b/src/main.cpp
@@ -636,7 +636,7 @@ int wmidi = -1;
         printf("[INFO] Launching Zyn-Fusion...\n");
         const char *addr = middleware->getServerAddress();
         if(fork() == 0) {
-            execlp("zyn-fusion", "zyn-fusion", "--builtin", "--no-hotload", addr, 0);
+            execlp("zyn-fusion", "zyn-fusion", addr, "--builtin", "--no-hotload",  0);
 
             err(1,"Failed to launch Zyn-Fusion");
         }
-- 
2.47.0

