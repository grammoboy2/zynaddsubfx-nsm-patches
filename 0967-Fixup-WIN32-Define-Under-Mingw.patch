From d0abc7986287e7a65b7e3c65907229bdf417e73a Mon Sep 17 00:00:00 2001
From: fundamental <mark.d.mccurry@gmail.com>
Date: Fri, 22 Jul 2016 11:45:17 -0400
Subject: [PATCH 0967/1936] Fixup WIN32 Define Under Mingw

---
 src/CMakeLists.txt      | 6 +++++-
 src/Misc/MiddleWare.cpp | 1 -
 src/UI/NSM/Client.H     | 1 -
 3 files changed, 5 insertions(+), 3 deletions(-)

diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index 7465a7e1..7df81ab5 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -33,7 +33,7 @@ if(CXXTEST_FOUND)
 endif()
 # lash
 if(PkgConfig_FOUND AND NOT (${CMAKE_SYSTEM_NAME} STREQUAL "Windows"))
-message("Looking For pkg config modules")
+    message("Looking For pkg config modules")
     pkg_search_module(LASH lash-1.0)
     mark_as_advanced(LASH_LIBRARIES)
     pkg_search_module(DSSI dssi>=0.9.0)
@@ -244,6 +244,10 @@ message(STATUS "Compiling with liblo")
 # other include directories
 include_directories(${ZLIB_INCLUDE_DIRS} ${MXML_INCLUDE_DIRS})
 
+if(${CMAKE_SYSTEM_NAME} STREQUAL "Windows")
+    add_definitions(-DWIN32)
+endif()
+
 add_definitions(
 	 -Wall
 	 -Wextra
diff --git a/src/Misc/MiddleWare.cpp b/src/Misc/MiddleWare.cpp
index eb029055..7a49b85f 100644
--- a/src/Misc/MiddleWare.cpp
+++ b/src/Misc/MiddleWare.cpp
@@ -21,7 +21,6 @@
 #include <rtosc/undo-history.h>
 #include <rtosc/thread-link.h>
 #include <rtosc/ports.h>
-#define  WIN32
 #include <lo/lo.h>
 
 #include <unistd.h>
diff --git a/src/UI/NSM/Client.H b/src/UI/NSM/Client.H
index af4b9c8e..7f399019 100644
--- a/src/UI/NSM/Client.H
+++ b/src/UI/NSM/Client.H
@@ -19,7 +19,6 @@
 
 #pragma once
 
-#define  WIN32
 #include <lo/lo.h>
 
 namespace NSM
-- 
2.47.0

