From e05ace44efbc8de912ab7b62127751e53187324f Mon Sep 17 00:00:00 2001
From: Johannes Lorenz <johannes89@ist-einmalig.de>
Date: Thu, 29 Dec 2016 20:24:40 +0100
Subject: [PATCH 1112/1936] Prevent jumps based on uninitialized values.
 Restrict maximum unison size.

---
 src/Misc/Master.h               | 4 ++--
 src/Params/ADnoteParameters.cpp | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/src/Misc/Master.h b/src/Misc/Master.h
index db5853d5..eb2147b4 100644
--- a/src/Misc/Master.h
+++ b/src/Misc/Master.h
@@ -181,8 +181,8 @@ class Master
 
         //Heartbeat for identifying plugin offline modes
         //in units of 10 ms (done s.t. overflow is in 497 days)
-        uint32_t last_beat;
-        uint32_t last_ack;
+        uint32_t last_beat = 0;
+        uint32_t last_ack = 0;
     private:
         float  sysefxvol[NUM_SYS_EFX][NUM_MIDI_PARTS];
         float  sysefxsend[NUM_SYS_EFX][NUM_SYS_EFX];
diff --git a/src/Params/ADnoteParameters.cpp b/src/Params/ADnoteParameters.cpp
index 6eb9efcb..f27fea2c 100644
--- a/src/Params/ADnoteParameters.cpp
+++ b/src/Params/ADnoteParameters.cpp
@@ -68,7 +68,7 @@ static const Ports voicePorts = {
     rRecurp(VoiceFilter,    "Optional Voice Filter"),
 
     rToggle(Enabled,       rShort("enable"), "Voice Enable"),
-    rParamZyn(Unison_size, rShort("size"),   "Number of subvoices"),
+    rParamI(Unison_size, rShort("size"), rMap(min, 0), rMap(max, 50), "Number of subvoices"),
     rParamZyn(Unison_phase_randomness, rShort("ph.rnd."), "Phase Randomness"),
     rParamZyn(Unison_frequency_spread, rShort("detune"),  "Subvoice detune"),
     rParamZyn(Unison_stereo_spread,    rShort("spread"),
-- 
2.47.0

