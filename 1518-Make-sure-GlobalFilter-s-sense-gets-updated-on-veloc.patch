From 44b0db2c53258f6ebd3465d8730898483a4ac2ba Mon Sep 17 00:00:00 2001
From: Hans Petter Selasky <hps@selasky.org>
Date: Sun, 5 Apr 2020 02:45:24 +0200
Subject: [PATCH 1518/1936] Make sure GlobalFilter's sense gets updated on
 velocity changes in SUBnote::setup() when legato is set.

Signed-off-by: Hans Petter Selasky <hps@selasky.org>
---
 src/Synth/SUBnote.cpp | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/Synth/SUBnote.cpp b/src/Synth/SUBnote.cpp
index be51edaa..1b243e9d 100644
--- a/src/Synth/SUBnote.cpp
+++ b/src/Synth/SUBnote.cpp
@@ -197,6 +197,9 @@ void SUBnote::setup(float velocity_,
                 GlobalFilter->updateNoteFreq(basefreq);
             else
                 GlobalFilter->updateNoteFreq(basefreq / 440.0f * freq);
+
+            GlobalFilter->updateSense(velocity, pars.PGlobalFilterVelocityScale,
+                                      pars.PGlobalFilterVelocityScaleFunction);
         }
     }
 
-- 
2.47.0

