From 34529b8f6479ebc550581c4082620f7a58243356 Mon Sep 17 00:00:00 2001
From: fundamental <mark.d.mccurry@gmail.com>
Date: Mon, 1 Sep 2014 12:39:52 -0400
Subject: [PATCH 0226/1936] Fix More Dispatch Issues

---
 src/Misc/Part.cpp     | 3 +++
 src/UI/VirKeyboard.fl | 4 ++--
 2 files changed, 5 insertions(+), 2 deletions(-)

diff --git a/src/Misc/Part.cpp b/src/Misc/Part.cpp
index afa2941e..426bd833 100644
--- a/src/Misc/Part.cpp
+++ b/src/Misc/Part.cpp
@@ -62,6 +62,7 @@ static Ports partPorts = {
     rParam(Pvelsns,   "Velocity sensing"),
     rParam(Pveloffs,  "Velocity offset"),
     rToggle(Pnoteon,  "If the channel accepts note on events"),
+    rToggle(Pkitmode, "Kit mode enable"),
     rToggle(Pdrummode, "Drum mode enable"),
     rToggle(Ppolymode,  "Polyphoney mode"),
     rToggle(Plegatomode, "Legato enable"),
@@ -70,6 +71,8 @@ static Ports partPorts = {
     rString(info.Pauthor, MAX_INFO_TEXT_SIZE, "Instrument Author"),
     rString(info.Pcomments, MAX_INFO_TEXT_SIZE, "Instrument Comments"),
     rString(Pname, PART_MAX_NAME_LEN, "Kit User Specified Label"),
+    rArray(Pefxroute, NUM_PART_EFX,  "Effect Routing"),
+    rArrayT(Pefxbypass, NUM_PART_EFX, "If an effect is bypassed"),
     {"captureMin:", NULL, NULL, [](const char *, RtData &r)
         {Part *p = (Part*)r.obj; p->Pminkey = p->lastnote;}},
     {"captureMax:", NULL, NULL, [](const char *, RtData &r)
diff --git a/src/UI/VirKeyboard.fl b/src/UI/VirKeyboard.fl
index d06a2c1b..14fbbb88 100644
--- a/src/UI/VirKeyboard.fl
+++ b/src/UI/VirKeyboard.fl
@@ -370,7 +370,7 @@ virkeyboardwindow->hide();}
         label Cval
         callback {int ctl=midictl;
 
-osc->write("setController", "ccc", virkeys->midich,ctl,(int) o->value());
+osc->write("/setController", "ccc", virkeys->midich,ctl,(int) o->value());
 virkeys->take_focus();}
         tooltip {Controller value} xywh {605 10 15 115} type {Vert Fill} box ENGRAVED_BOX selection_color 229 labelsize 8 align 5 minimum 127 maximum 0 step 1 value 64 textsize 7
       }
@@ -450,7 +450,7 @@ virkeys->take_focus();}
       }
       Fl_Roller pitchwheelroller {
         label Pwh
-        callback {osc->write("setController", "ccc", virkeys->midich,C_pitchwheel,-(int) o->value());
+        callback {osc->write("/setController", "ccc", virkeys->midich,C_pitchwheel,-(int) o->value());
 virkeys->take_focus();}
         tooltip {Pitch Wheel} xywh {625 10 20 95} labelsize 8 align 1 when 3 minimum -8192 maximum 8192 step 64
       }
-- 
2.47.0

