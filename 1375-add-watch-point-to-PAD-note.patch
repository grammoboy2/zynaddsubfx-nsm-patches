From 56078f008b88d74798138261f331ddca7419017f Mon Sep 17 00:00:00 2001
From: michiboo <chanmickyyun@gmail.com>
Date: Sun, 23 Jun 2019 13:45:34 +0300
Subject: [PATCH 1375/1936] add watch point to PAD note

---
 src/Synth/PADnote.cpp | 6 +++++-
 src/Synth/PADnote.h   | 2 ++
 2 files changed, 7 insertions(+), 1 deletion(-)

diff --git a/src/Synth/PADnote.cpp b/src/Synth/PADnote.cpp
index 7e10a493..94e5db62 100644
--- a/src/Synth/PADnote.cpp
+++ b/src/Synth/PADnote.cpp
@@ -28,7 +28,8 @@ namespace zyn {
 PADnote::PADnote(const PADnoteParameters *parameters,
                  SynthParams pars, const int& interpolation, WatchManager *wm,
                  const char *prefix)
-    :SynthNote(pars), pars(*parameters), interpolation(interpolation)
+    :SynthNote(pars), pars(*parameters), interpolation(interpolation),
+    watchOut(wm, prefix, "out"), watchOut1(wm,prefix,"out1")
 {
     NoteGlobalPar.GlobalFilter    = nullptr;
     NoteGlobalPar.FilterEnvelope  = nullptr;
@@ -377,6 +378,7 @@ int PADnote::noteout(float *outl, float *outr)
     else
         Compute_Linear(outl, outr, freqhi, freqlo);
 
+    watchOut(outr,synth.buffersize);
 
     if(firsttime) {
         fadein(outl);
@@ -400,6 +402,8 @@ int PADnote::noteout(float *outl, float *outr)
             }
         }
 
+    watchOut1(outr,synth.buffersize);
+
     if(ABOVE_AMPLITUDE_THRESHOLD(globaloldamplitude, globalnewamplitude))
         // Amplitude Interpolation
         for(int i = 0; i < synth.buffersize; ++i) {
diff --git a/src/Synth/PADnote.h b/src/Synth/PADnote.h
index b277f6a4..4485149c 100644
--- a/src/Synth/PADnote.h
+++ b/src/Synth/PADnote.h
@@ -35,6 +35,8 @@ class PADnote:public SynthNote
         bool finished() const;
         void entomb(void);
 
+        VecWatchPoint watchOut,watchOut1;
+
         void releasekey();
     private:
         void setup(float freq, float velocity, int portamento_,
-- 
2.47.0

