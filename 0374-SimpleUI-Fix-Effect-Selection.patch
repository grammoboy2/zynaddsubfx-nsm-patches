From ae765298e509decb9886c56b3b28655bf606aba4 Mon Sep 17 00:00:00 2001
From: fundamental <mark.d.mccurry@gmail.com>
Date: Wed, 25 Feb 2015 18:46:33 -0500
Subject: [PATCH 0374/1936] SimpleUI: Fix Effect Selection

---
 src/UI/EffUI.fl    | 2 +-
 src/UI/MasterUI.fl | 9 ++++++++-
 2 files changed, 9 insertions(+), 2 deletions(-)

diff --git a/src/UI/EffUI.fl b/src/UI/EffUI.fl
index 35d8e342..02fff348 100644
--- a/src/UI/EffUI.fl
+++ b/src/UI/EffUI.fl
@@ -1260,7 +1260,7 @@ this->show();} {selected
 
 class SimpleEffUI {open : {public Fl_Osc_Group,public PresetsUI_}
 } {
-  Function {SimpleEffUI(int x,int y, int w, int h, const char *label=0):Fl_Osc_Group(x,y,w,h,label)} {} {
+  Function {SimpleEffUI(int x,int y, int w, int h, const char *label=0):Fl_Osc_Group(x,y,w,h,label),efftype(0)} {} {
     code {} {}
   }
   Function {~SimpleEffUI()} {} {
diff --git a/src/UI/MasterUI.fl b/src/UI/MasterUI.fl
index 3a8d1ae0..ede482c5 100644
--- a/src/UI/MasterUI.fl
+++ b/src/UI/MasterUI.fl
@@ -1105,7 +1105,7 @@ simplemaxkcounter->do_callback();}
         }
         Fl_Dial simplesyseffsend {
           xywh {300 160 30 30} maximum 127 step 1
-          code0 {o->alt_init("/","Psysefxvol"+to_s(nsyseff)+"/part"+to_s(npart));}
+          code0 {o->alt_init("/","Psysefxvol"+to_s(nsyseff-1)+"/part"+to_s(npart));}
           class Fl_Osc_Dial
         }
         Fl_Box {} {
@@ -1161,6 +1161,10 @@ simplerefresh();}
             }
             Fl_Choice simplesysefftype {
               label EffType
+              callback {
+              simplesyseffectui->efftype = o->value();
+simplesyseffectui->refresh();
+              }
               xywh {515 80 70 15} down_box BORDER_BOX labelsize 10 align 5
               code0 {o->init("sysefx"+to_s(nsyseff)+"/efftype");}
               class Fl_Osc_Choice
@@ -1213,6 +1217,7 @@ simplerefresh();}
               Fl_Group simplesyseffectui {
                 xywh {350 95 234 95}
                 code0 {o->init(false);}
+                code1 {o->refresh();}
                 class SimpleEffUI
               } {}
             }
@@ -1238,6 +1243,8 @@ pthread_mutex_unlock(&master->mutex);*/}
               callback {ninseff=(int) o->value()-1;
 /*simpleinsefftype->value(master->insefx[ninseff]->geteffect());
 simpleinseffpart->value(master->Pinsparts[ninseff]+2);*/
+simpleinseffectuigroup->reext("insefx"+to_s(ninseff)+"/");
+simpleinsefftype->oscMove("insefx"+to_s(ninseff)+"/efftype");
 simpleinseffectui->refresh();
 
 /*
-- 
2.47.0

