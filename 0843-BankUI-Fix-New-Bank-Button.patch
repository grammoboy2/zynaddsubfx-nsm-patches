From 440a7b7171c860024fb3ddb468c2e46212aab98d Mon Sep 17 00:00:00 2001
From: fundamental <mark.d.mccurry@gmail.com>
Date: Sat, 6 Feb 2016 10:22:31 -0500
Subject: [PATCH 0843/1936] BankUI: Fix `New Bank' Button

---
 src/Misc/MiddleWare.cpp | 6 ++++++
 src/UI/BankUI.fl        | 5 +----
 2 files changed, 7 insertions(+), 4 deletions(-)

diff --git a/src/Misc/MiddleWare.cpp b/src/Misc/MiddleWare.cpp
index c3403d91..90ccf5b9 100644
--- a/src/Misc/MiddleWare.cpp
+++ b/src/Misc/MiddleWare.cpp
@@ -909,6 +909,12 @@ rtosc::Ports bankPorts = {
         rBegin;
         impl.setLsb(rtosc_argument(msg, 0).i);
         rEnd},
+    {"newbank:s", 0, 0,
+        rBegin;
+        int err = impl.newbank(rtosc_argument(msg, 0).s);
+        if(err)
+            d.reply("/alert", "s", "Error: Could not make a new bank (directory)..");
+        rEnd},
 };
 
 /******************************************************************************
diff --git a/src/UI/BankUI.fl b/src/UI/BankUI.fl
index f98b61b8..099aa75d 100644
--- a/src/UI/BankUI.fl
+++ b/src/UI/BankUI.fl
@@ -72,10 +72,7 @@ class BankUI {open
 dirname=fl_input("New empty Bank:");
 if (dirname==NULL) return;
 
-
-osc->write("/newbank", "s", dirname);
-/*if (result!=0) fl_alert("Error: Could not make a new bank (directory)..");*/
-
+osc->write("/bank/newbank", "s", dirname);
 refreshmainwindow();}
         xywh {685 5 93 25} labelfont 1 labelsize 11 align 128
       }
-- 
2.47.0

